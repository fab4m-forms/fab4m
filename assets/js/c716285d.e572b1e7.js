(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8285],{28181:(e,t,n)=>{"use strict";n.r(t),n.d(t,{assets:()=>j,contentTitle:()=>w,default:()=>q,frontMatter:()=>x,metadata:()=>r,toc:()=>S});const r=JSON.parse('{"id":"guide/variants","title":"Component Variants","description":"Component variants allows you to change all aspects of a form component based","source":"@site/docs/guide/variants.mdx","sourceDirName":"guide","slug":"/guide/variants","permalink":"/docs/guide/variants","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7},"sidebar":"tutorialSidebar","previous":{"title":"Component Rules","permalink":"/docs/guide/rules"},"next":{"title":"Validation with JSON Schema","permalink":"/docs/guide/validation"}}');var a=n(74848),o=n(28453),i=n(53603),l=n(96540),s=n(1173);const u=(0,s.DG)({likeBio:(0,s.hQ)({label:"Do you like to talk about yourself?"}),bio:[["likeBio",(0,s.t2)(),(0,s.ds)({label:"You have to write your bio now!",required:!0})],(0,s.ds)({label:"Biography"})]});function c(){return(0,a.jsx)(s.WJ,{form:u,hideSubmit:!0})}const d='import * as React from "react";\nimport {\n  textAreaField,\n  booleanField,\n  exists,\n  createForm,\n  StatefulFormView,\n} from "@fab4m/fab4m";\n\nconst form = createForm({\n  likeBio: booleanField({ label: "Do you like to talk about yourself?" }),\n  bio: [\n    // This variant is defined like a rule. If the rule is true,\n    // then the variant is activated.\n    [\n      "likeBio",\n      exists(),\n      textAreaField({\n        label: "You have to write your bio now!",\n        required: true,\n      }),\n    ],\n    // You can also provide a component without a rule. If you reach this point,\n    // then the component will be rendered.\n    textAreaField({ label: "Biography" }),\n  ],\n});\n\nexport default function RequiredWhenPresent() {\n  return <StatefulFormView form={form} hideSubmit={true} />;\n}\n',f=(0,s.DG)({city:(0,s.M8)({label:"Select your city",widget:(0,s.Xj)(["London","Paris","New york"])}),attractions:[["city",(0,s.aI)("Paris"),(0,s.hQ)({label:"I visited the eiffel tower",required:!0})],["city",(0,s.aI)("London"),(0,s.hQ)({label:"I visited Buckinghamn palace",required:!0})],["city",(0,s.aI)("New york"),(0,s.hQ)({label:"I visited the statue of liberty",required:!0})],(0,s.Qs)({},(()=>"Select a city to tell us if you visited a popular attraction!"))]});function h(){return(0,a.jsx)(s.WJ,{form:f,hideSubmit:!0})}const p='import * as React from "react";\nimport {\n  booleanField,\n  textField,\n  equals,\n  content,\n  createForm,\n  StatefulFormView,\n  selectWidget,\n} from "@fab4m/fab4m";\n\nconst form = createForm({\n  city: textField({\n    label: "Select your city",\n    widget: selectWidget(["London", "Paris", "New york"]),\n  }),\n  attractions: [\n    // This variant is defined like a rule. If the rule is true,\n    // then the variant is activated.\n    [\n      "city",\n      equals("Paris"),\n      booleanField({\n        label: "I visited the eiffel tower",\n        required: true,\n      }),\n    ],\n    [\n      "city",\n      equals("London"),\n      booleanField({\n        label: "I visited Buckinghamn palace",\n        required: true,\n      }),\n    ],\n    [\n      "city",\n      equals("New york"),\n      booleanField({\n        label: "I visited the statue of liberty",\n        required: true,\n      }),\n    ],\n    content(\n      {},\n      () => "Select a city to tell us if you visited a popular attraction!"\n    ),\n  ],\n});\n\nexport default function VariantSelection() {\n  return <StatefulFormView form={form} hideSubmit={true} />;\n}\n';var m=n(1399),b=n.n(m);const v=(0,s.DG)({transport:(0,s.M8)({label:"How do you get to work?",required:!0,widget:(0,s.Xj)(["Car","Public transport"])}),questions:[["transport",(0,s.aI)("Car"),(0,s.Os)({label:"Questions"},{car:(0,s.M8)({label:"What type of car do you have?",required:!0})})],["transport",(0,s.aI)("Public transport"),(0,s.Os)({label:"Questions"},{publicTransport:(0,s.M8)({label:"What type of public transport do you use?",required:!0})})]]});function y(){const[e,t]=l.useState((0,s.B6)(v));return v.onDataChange((e=>{t((0,s.B6)(v,e))})),(0,a.jsxs)("div",{children:[(0,a.jsx)(s.WJ,{form:v,hideSubmit:!0}),(0,a.jsx)("h4",{children:"Here's the schema:"}),(0,a.jsx)("pre",{children:b()(e,null,2,80)})]})}const g='import * as React from "react";\nimport * as beautify from "json-beautify";\nimport {\n  textField,\n  equals,\n  createForm,\n  StatefulFormView,\n  selectWidget,\n  group,\n  generateSchema,\n} from "@fab4m/fab4m";\nimport { Schema } from "ajv";\n\nconst form = createForm({\n  transport: textField({\n    label: "How do you get to work?",\n    required: true,\n    widget: selectWidget(["Car", "Public transport"]),\n  }),\n\n  questions: [\n    [\n      "transport",\n      equals("Car"),\n      group(\n        { label: "Questions" },\n        {\n          car: textField({\n            label: "What type of car do you have?",\n            required: true,\n          }),\n        },\n      ),\n    ],\n    [\n      "transport",\n      equals("Public transport"),\n      group(\n        { label: "Questions" },\n        {\n          publicTransport: textField({\n            label: "What type of public transport do you use?",\n            required: true,\n          }),\n        },\n      ),\n    ],\n  ],\n});\n\nexport default function VariantSchema() {\n  const [schema, changeSchema] = React.useState<string | Schema>(\n    generateSchema(form),\n  );\n  form.onDataChange((data) => {\n    changeSchema(generateSchema(form, data));\n  });\n  return (\n    <div>\n      <StatefulFormView form={form} hideSubmit={true} />\n      <h4>Here\'s the schema:</h4>\n      <pre>{beautify.default(schema, null, 2, 80)}</pre>\n    </div>\n  );\n}\n',x={sidebar_position:7},w="Component Variants",j={},S=[{value:"Variant selection",id:"variant-selection",level:2},{value:"A note about variants and JSON Schema",id:"a-note-about-variants-and-json-schema",level:2}];function k(e){const t={h1:"h1",h2:"h2",header:"header",p:"p",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"component-variants",children:"Component Variants"})}),"\n",(0,a.jsx)(t.p,{children:"Component variants allows you to change all aspects of a form component based\non the state of the rest of the form."}),"\n",(0,a.jsx)(t.p,{children:"While rules allows you to show and hide different component based on the form state,\nvariants lets you customize everything."}),"\n",(0,a.jsx)(t.p,{children:"Here's a simple example where we make the form component required or not, depending\non the form state:"}),"\n",(0,a.jsx)(i.A,{source:d,example:(0,a.jsx)(c,{})}),"\n",(0,a.jsx)(t.h2,{id:"variant-selection",children:"Variant selection"}),"\n",(0,a.jsx)(t.p,{children:"A variant array is evaluated in order, and the first variant where the rule passes\nis selected. If you provide a component without a rule, it will always be selected."}),"\n",(0,a.jsx)(i.A,{source:p,example:(0,a.jsx)(h,{})}),"\n",(0,a.jsx)(t.h2,{id:"a-note-about-variants-and-json-schema",children:"A note about variants and JSON Schema"}),"\n",(0,a.jsx)(t.p,{children:"When you use variants, you need to provide the data you want to validate when you generate your\nJSON Schema, for example:"}),"\n",(0,a.jsx)(i.A,{source:g,example:(0,a.jsx)(y,{})})]})}function q(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(k,{...e})}):k(e)}},79329:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});n(96540);var r=n(34164);const a={tabItem:"tabItem_Ymn6"};var o=n(74848);function i(e){let{children:t,hidden:n,className:i}=e;return(0,o.jsx)("div",{role:"tabpanel",className:(0,r.A)(a.tabItem,i),hidden:n,children:t})}},65537:(e,t,n)=>{"use strict";n.d(t,{A:()=>j});var r=n(96540),a=n(34164),o=n(65627),i=n(56347),l=n(50372),s=n(30604),u=n(11861),c=n(78749);function d(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function f(e){const{values:t,children:n}=e;return(0,r.useMemo)((()=>{const e=t??function(e){return d(e).map((e=>{let{props:{value:t,label:n,attributes:r,default:a}}=e;return{value:t,label:n,attributes:r,default:a}}))}(n);return function(e){const t=(0,u.XI)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function h(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function p(e){let{queryString:t=!1,groupId:n}=e;const a=(0,i.W6)(),o=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,s.aZ)(o),(0,r.useCallback)((e=>{if(!o)return;const t=new URLSearchParams(a.location.search);t.set(o,e),a.replace({...a.location,search:t.toString()})}),[o,a])]}function m(e){const{defaultValue:t,queryString:n=!1,groupId:a}=e,o=f(e),[i,s]=(0,r.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!h({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const r=n.find((e=>e.default))??n[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:t,tabValues:o}))),[u,d]=p({queryString:n,groupId:a}),[m,b]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[a,o]=(0,c.Dv)(n);return[a,(0,r.useCallback)((e=>{n&&o.set(e)}),[n,o])]}({groupId:a}),v=(()=>{const e=u??m;return h({value:e,tabValues:o})?e:null})();(0,l.A)((()=>{v&&s(v)}),[v]);return{selectedValue:i,selectValue:(0,r.useCallback)((e=>{if(!h({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);s(e),d(e),b(e)}),[d,b,o]),tabValues:o}}var b=n(9136);const v={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var y=n(74848);function g(e){let{className:t,block:n,selectedValue:r,selectValue:i,tabValues:l}=e;const s=[],{blockElementScrollPositionUntilNextRender:u}=(0,o.a_)(),c=e=>{const t=e.currentTarget,n=s.indexOf(t),a=l[n].value;a!==r&&(u(t),i(a))},d=e=>{let t=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const n=s.indexOf(e.currentTarget)+1;t=s[n]??s[0];break}case"ArrowLeft":{const n=s.indexOf(e.currentTarget)-1;t=s[n]??s[s.length-1];break}}t?.focus()};return(0,y.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":n},t),children:l.map((e=>{let{value:t,label:n,attributes:o}=e;return(0,y.jsx)("li",{role:"tab",tabIndex:r===t?0:-1,"aria-selected":r===t,ref:e=>{s.push(e)},onKeyDown:d,onClick:c,...o,className:(0,a.A)("tabs__item",v.tabItem,o?.className,{"tabs__item--active":r===t}),children:n??t},t)}))})}function x(e){let{lazy:t,children:n,selectedValue:o}=e;const i=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=i.find((e=>e.props.value===o));return e?(0,r.cloneElement)(e,{className:(0,a.A)("margin-top--md",e.props.className)}):null}return(0,y.jsx)("div",{className:"margin-top--md",children:i.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==o})))})}function w(e){const t=m(e);return(0,y.jsxs)("div",{className:(0,a.A)("tabs-container",v.tabList),children:[(0,y.jsx)(g,{...t,...e}),(0,y.jsx)(x,{...t,...e})]})}function j(e){const t=(0,b.A)();return(0,y.jsx)(w,{...e,children:d(e.children)},String(t))}},53603:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});n(96540);var r=n(35363),a=n(55875),o=n(65537),i=n(79329),l=n(74848);function s(e){return(0,l.jsxs)(o.A,{children:[(0,l.jsx)(i.A,{value:"code",label:"Code",children:(0,l.jsx)(a.A,{language:"jsx",children:e.source})}),(0,l.jsx)(i.A,{value:"example",label:"Example",children:(0,l.jsx)(r.A,{children:()=>e.example})})]})}},1399:e=>{var t,n,r,a=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function i(e){return a.lastIndex=0,a.test(e)?'"'+e.replace(a,(function(e){var t=o[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function l(e,a,o){var s,u,c,d,f,h=t,p=a[e];switch(p&&"object"==typeof p&&"function"==typeof p.toJSON&&(p=p.toJSON(e)),"function"==typeof r&&(p=r.call(a,e,p)),typeof p){case"string":return i(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":return String(p);case"object":if(!p)return"null";if(t+=n,f=[],"[object Array]"===Object.prototype.toString.apply(p)){for(d=p.length,s=0;s<d;s+=1)f[s]=l(s,p,o)||"null";return c=0===f.length?"[]":t?t.length+f.join(", ").length+4>o?"[\n"+t+f.join(",\n"+t)+"\n"+h+"]":"[ "+f.join(", ")+" ]":"["+f.join(",")+"]",t=h,c}if(r&&"object"==typeof r)for(d=r.length,s=0;s<d;s+=1)"string"==typeof r[s]&&(c=l(u=r[s],p,o))&&f.push(i(u)+(t?": ":":")+c);else for(u in p)Object.prototype.hasOwnProperty.call(p,u)&&(c=l(u,p,o))&&f.push(i(u)+(t?": ":":")+c);return c=0===f.length?"{}":t?t.length+f.join(", ").length+4>o?"{\n"+t+f.join(",\n"+t)+"\n"+h+"}":"{ "+f.join(", ")+" }":"{"+f.join(",")+"}",t=h,c}}e.exports=function(e,a,o,i){var s;if(t="",n="",i||(i=0),"number"!=typeof i)throw new Error("beaufifier: limit must be a number");if("number"==typeof o)for(s=0;s<o;s+=1)n+=" ";else"string"==typeof o&&(n=o);if(r=a,a&&"function"!=typeof a&&("object"!=typeof a||"number"!=typeof a.length))throw new Error("beautifier: wrong replacer parameter");return l("",{"":e},i)}}}]);