(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2168],{94967:(e,t,n)=>{"use strict";n.r(t),n.d(t,{assets:()=>w,contentTitle:()=>j,default:()=>k,frontMatter:()=>v,metadata:()=>r,toc:()=>S});const r=JSON.parse('{"id":"guide/rules","title":"Component Rules","description":"There might be situations where you want to optionally show or hide some components","source":"@site/docs/guide/rules.mdx","sourceDirName":"guide","slug":"/guide/rules","permalink":"/docs/guide/rules","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7},"sidebar":"tutorialSidebar","previous":{"title":"Component Validators","permalink":"/docs/guide/validators"},"next":{"title":"Component Variants","permalink":"/docs/guide/variants"}}');var o=n(74848),a=n(28453),l=n(53603),s=n(96540),u=n(1173);const i=(0,u.DG)({city:(0,u.M8)({label:"City"}),inCityCenter:(0,u.hQ)({label:"Do you live in the city center?"}),streetCars:(0,u.hQ)({label:"Do you use street cars?",rules:[["city",(0,u.aI)("Gothenburg")],["inCityCenter",(0,u.aI)(!0)]]}),subway:(0,u.hQ)({label:"Do you use the subway?",rules:[["city",(0,u.aI)("Stockholm")]]}),usage:(0,u.nm)({label:"How may times do you use public transport per week?"}),expensive:(0,u.hQ)({label:"Do you think public transport is too expensive?",rules:[["usage",(0,u.T9)(3)]]})});function c(){return(0,o.jsx)(u.WJ,{form:i,hideSubmit:!0})}const d='import * as React from "react";\nimport {\n  textField,\n  integerField,\n  booleanField,\n  equals,\n  max,\n  createForm,\n  StatefulFormView,\n} from "@fab4m/fab4m";\n\nconst form = createForm({\n  city: textField({ label: "City" }),\n  inCityCenter: booleanField({ label: "Do you live in the city center?" }),\n  streetCars: booleanField({\n    label: "Do you use street cars?",\n    rules: [\n      ["city", equals("Gothenburg")],\n      ["inCityCenter", equals(true)],\n    ],\n  }),\n  subway: booleanField({\n    label: "Do you use the subway?",\n    rules: [["city", equals("Stockholm")]],\n  }),\n  usage: integerField({\n    label: "How may times do you use public transport per week?",\n  }),\n  expensive: booleanField({\n    label: "Do you think public transport is too expensive?",\n    rules: [["usage", max(3)]],\n  }),\n});\n\nexport default function BasicRules() {\n  return <StatefulFormView form={form} hideSubmit={true} />;\n}\n',h=(0,u.DG)({city:(0,u.M8)({label:"City"}),usage:(0,u.nm)({label:"How may times do you use public transport per week?"}),expensive:(0,u.hQ)({label:"Do you think public transport is too expensive?",rules:[(0,u.or)([["city",(0,u.aI)("Gothenburg")],["usage",(0,u.T9)(5)]])]})});function m(){return(0,o.jsx)(u.WJ,{form:h,hideSubmit:!0})}const p='import React from "react";\nimport {\n  textField,\n  integerField,\n  booleanField,\n  equals,\n  max,\n  createForm,\n  StatefulFormView,\n  or,\n} from "@fab4m/fab4m";\n\nconst form = createForm({\n  city: textField({ label: "City" }),\n  usage: integerField({\n    label: "How may times do you use public transport per week?",\n  }),\n  expensive: booleanField({\n    label: "Do you think public transport is too expensive?",\n    rules: [\n      or([\n        ["city", equals("Gothenburg")],\n        ["usage", max(5)],\n      ]),\n    ],\n  }),\n});\n\nexport default function BasicRules() {\n  return <StatefulFormView form={form} hideSubmit={true} />;\n}\n';var f=n(1399),b=n.n(f);const y=(0,u.DG)({city:(0,u.M8)({label:"City"}),streetCars:(0,u.hQ)({label:"Do you use street cars?",required:!0,rules:[["city",(0,u.aI)("Gothenburg")]]})});function g(){const[e,t]=s.useState((0,u.B6)(y));return y.onDataChange((e=>{t((0,u.B6)(y,e))})),(0,o.jsxs)("div",{children:[(0,o.jsx)(u.WJ,{form:y,hideSubmit:!0}),(0,o.jsx)("h4",{children:"Here's the schema:"}),(0,o.jsx)("pre",{children:b()(e,null,2,80)})]})}const x='import * as React from "react";\nimport * as beautify from "json-beautify";\nimport {\n  textField,\n  equals,\n  StatefulFormView,\n  generateSchema,\n  createForm,\n  booleanField,\n} from "@fab4m/fab4m";\n\nconst form = createForm({\n  city: textField({ label: "City" }),\n  streetCars: booleanField({\n    label: "Do you use street cars?",\n    required: true,\n    rules: [["city", equals("Gothenburg")]],\n  }),\n});\n\nexport default function RuleSchema() {\n  const [schema, changeSchema] = React.useState(generateSchema(form));\n  form.onDataChange((data) => {\n    changeSchema(generateSchema(form, data));\n  });\n  return (\n    <div>\n      <StatefulFormView form={form} hideSubmit={true} />\n      <h4>Here\'s the schema:</h4>\n      <pre>{beautify.default(schema, null, 2, 80)}</pre>\n    </div>\n  );\n}\n',v={sidebar_position:7},j="Component Rules",w={},S=[{value:"Adding rules to a component",id:"adding-rules-to-a-component",level:2},{value:"Rule groups",id:"rule-groups",level:2},{value:"Custom rules",id:"custom-rules",level:2},{value:"Rules and JSON Schema",id:"rules-and-json-schema",level:2},{value:"Check out the rule library",id:"check-out-the-rule-library",level:2}];function C(e){const t={code:"code",em:"em",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.header,{children:(0,o.jsx)(t.h1,{id:"component-rules",children:"Component Rules"})}),"\n",(0,o.jsx)(t.p,{children:"There might be situations where you want to optionally show or hide some components\ndepending on the input in other components. This is what component rules are for."}),"\n",(0,o.jsx)(t.h2,{id:"adding-rules-to-a-component",children:"Adding rules to a component"}),"\n",(0,o.jsx)(t.p,{children:"When defining your components you can add a list of rules that needs to be fulfilled\nin order for the component to be visible:"}),"\n",(0,o.jsx)(l.A,{source:d,example:(0,o.jsx)(c,{})}),"\n",(0,o.jsx)(t.h2,{id:"rule-groups",children:"Rule groups"}),"\n",(0,o.jsx)(t.p,{children:"By default, rules are logically ANDed together."}),"\n",(0,o.jsx)(t.p,{children:"You can use logical groups to override this."}),"\n",(0,o.jsx)(l.A,{source:p,example:(0,o.jsx)(m,{})}),"\n",(0,o.jsx)(t.p,{children:"Rule functions can also be nested:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-jsx",children:'expensive: booleanField({\n  title: "Do you think public transport is too expensive?",\n  rules: [or([equals("city", "Gothenburg"), and([greaterThan("usage", 5), lessThan(10)]))],\n}),\n'})}),"\n",(0,o.jsx)(t.h2,{id:"custom-rules",children:"Custom rules"}),"\n",(0,o.jsx)(t.p,{children:"You can use the callback rule to provide any logic you want for your form."}),"\n",(0,o.jsx)(t.h2,{id:"rules-and-json-schema",children:"Rules and JSON Schema"}),"\n",(0,o.jsx)(t.p,{children:"Due to the potential complexity of rules in forms, we generate a unique JSON\nschema depending on the state of the data to keep the schema simple. for example:"}),"\n",(0,o.jsx)(l.A,{source:x,example:(0,o.jsx)(g,{})}),"\n",(0,o.jsx)(t.h2,{id:"check-out-the-rule-library",children:"Check out the rule library"}),"\n",(0,o.jsxs)(t.p,{children:["Fab4m comes with several rules, check them out in the ",(0,o.jsx)(t.em,{children:"Rule reference"}),". Also, check the ",(0,o.jsx)(t.em,{children:"extension guide"})," on how to create your own widgets."]})]})}function k(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(C,{...e})}):C(e)}},79329:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});n(96540);var r=n(34164);const o={tabItem:"tabItem_Ymn6"};var a=n(74848);function l(e){let{children:t,hidden:n,className:l}=e;return(0,a.jsx)("div",{role:"tabpanel",className:(0,r.A)(o.tabItem,l),hidden:n,children:t})}},65537:(e,t,n)=>{"use strict";n.d(t,{A:()=>w});var r=n(96540),o=n(34164),a=n(65627),l=n(56347),s=n(50372),u=n(30604),i=n(11861),c=n(78749);function d(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:t,children:n}=e;return(0,r.useMemo)((()=>{const e=t??function(e){return d(e).map((e=>{let{props:{value:t,label:n,attributes:r,default:o}}=e;return{value:t,label:n,attributes:r,default:o}}))}(n);return function(e){const t=(0,i.XI)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function m(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function p(e){let{queryString:t=!1,groupId:n}=e;const o=(0,l.W6)(),a=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,u.aZ)(a),(0,r.useCallback)((e=>{if(!a)return;const t=new URLSearchParams(o.location.search);t.set(a,e),o.replace({...o.location,search:t.toString()})}),[a,o])]}function f(e){const{defaultValue:t,queryString:n=!1,groupId:o}=e,a=h(e),[l,u]=(0,r.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!m({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const r=n.find((e=>e.default))??n[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:t,tabValues:a}))),[i,d]=p({queryString:n,groupId:o}),[f,b]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[o,a]=(0,c.Dv)(n);return[o,(0,r.useCallback)((e=>{n&&a.set(e)}),[n,a])]}({groupId:o}),y=(()=>{const e=i??f;return m({value:e,tabValues:a})?e:null})();(0,s.A)((()=>{y&&u(y)}),[y]);return{selectedValue:l,selectValue:(0,r.useCallback)((e=>{if(!m({value:e,tabValues:a}))throw new Error(`Can't select invalid tab value=${e}`);u(e),d(e),b(e)}),[d,b,a]),tabValues:a}}var b=n(9136);const y={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var g=n(74848);function x(e){let{className:t,block:n,selectedValue:r,selectValue:l,tabValues:s}=e;const u=[],{blockElementScrollPositionUntilNextRender:i}=(0,a.a_)(),c=e=>{const t=e.currentTarget,n=u.indexOf(t),o=s[n].value;o!==r&&(i(t),l(o))},d=e=>{let t=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const n=u.indexOf(e.currentTarget)+1;t=u[n]??u[0];break}case"ArrowLeft":{const n=u.indexOf(e.currentTarget)-1;t=u[n]??u[u.length-1];break}}t?.focus()};return(0,g.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.A)("tabs",{"tabs--block":n},t),children:s.map((e=>{let{value:t,label:n,attributes:a}=e;return(0,g.jsx)("li",{role:"tab",tabIndex:r===t?0:-1,"aria-selected":r===t,ref:e=>{u.push(e)},onKeyDown:d,onClick:c,...a,className:(0,o.A)("tabs__item",y.tabItem,a?.className,{"tabs__item--active":r===t}),children:n??t},t)}))})}function v(e){let{lazy:t,children:n,selectedValue:a}=e;const l=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=l.find((e=>e.props.value===a));return e?(0,r.cloneElement)(e,{className:(0,o.A)("margin-top--md",e.props.className)}):null}return(0,g.jsx)("div",{className:"margin-top--md",children:l.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==a})))})}function j(e){const t=f(e);return(0,g.jsxs)("div",{className:(0,o.A)("tabs-container",y.tabList),children:[(0,g.jsx)(x,{...t,...e}),(0,g.jsx)(v,{...t,...e})]})}function w(e){const t=(0,b.A)();return(0,g.jsx)(j,{...e,children:d(e.children)},String(t))}},53603:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});n(96540);var r=n(35363),o=n(55875),a=n(65537),l=n(79329),s=n(74848);function u(e){return(0,s.jsxs)(a.A,{children:[(0,s.jsx)(l.A,{value:"code",label:"Code",children:(0,s.jsx)(o.A,{language:"jsx",children:e.source})}),(0,s.jsx)(l.A,{value:"example",label:"Example",children:(0,s.jsx)(r.A,{children:()=>e.example})})]})}},1399:e=>{var t,n,r,o=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,a={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function l(e){return o.lastIndex=0,o.test(e)?'"'+e.replace(o,(function(e){var t=a[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function s(e,o,a){var u,i,c,d,h,m=t,p=o[e];switch(p&&"object"==typeof p&&"function"==typeof p.toJSON&&(p=p.toJSON(e)),"function"==typeof r&&(p=r.call(o,e,p)),typeof p){case"string":return l(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":return String(p);case"object":if(!p)return"null";if(t+=n,h=[],"[object Array]"===Object.prototype.toString.apply(p)){for(d=p.length,u=0;u<d;u+=1)h[u]=s(u,p,a)||"null";return c=0===h.length?"[]":t?t.length+h.join(", ").length+4>a?"[\n"+t+h.join(",\n"+t)+"\n"+m+"]":"[ "+h.join(", ")+" ]":"["+h.join(",")+"]",t=m,c}if(r&&"object"==typeof r)for(d=r.length,u=0;u<d;u+=1)"string"==typeof r[u]&&(c=s(i=r[u],p,a))&&h.push(l(i)+(t?": ":":")+c);else for(i in p)Object.prototype.hasOwnProperty.call(p,i)&&(c=s(i,p,a))&&h.push(l(i)+(t?": ":":")+c);return c=0===h.length?"{}":t?t.length+h.join(", ").length+4>a?"{\n"+t+h.join(",\n"+t)+"\n"+m+"}":"{ "+h.join(", ")+" }":"{"+h.join(",")+"}",t=m,c}}e.exports=function(e,o,a,l){var u;if(t="",n="",l||(l=0),"number"!=typeof l)throw new Error("beaufifier: limit must be a number");if("number"==typeof a)for(u=0;u<a;u+=1)n+=" ";else"string"==typeof a&&(n=a);if(r=o,o&&"function"!=typeof o&&("object"!=typeof o||"number"!=typeof o.length))throw new Error("beautifier: wrong replacer parameter");return s("",{"":e},l)}}}]);